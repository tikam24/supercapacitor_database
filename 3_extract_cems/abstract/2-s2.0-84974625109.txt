A flexible one-pot strategy for fabricating a 3D network of nitrogen-doped (N-doped) carbon ultrathin nanosheets with closely packed mesopores (N-MCN) via an in situ template method is reported in this research. The self-assembly soluble salts (NaCl and Na2SiO3) serve as hierarchical templates and support the formation of a 3D glucose-urea complex. The organic complex is heat-treated to obtain a 3D N-doped carbon network constructed by mesoporous nanosheets. Especially, both the mesoporous structure and doping content can be easily tuned by adjusting the ratio of raw materials. The large specific surface area and closely packed mesopores facilitate the lithium ion intercalation/deintercalation accordingly. Besides, the nitrogen content improves the lithium storage ability and capacitive properties. Due to the synergistic effect of hierarchical structure and heteroatom composition, the 3D N-MCN shows excellent characteristics as the electrode of a lithium ion battery and supercapacitor, such as ultrahigh reversible storage capacity (1222 mAh g-1 at 0.1 A g-1), stable long cycle performance at high current density (600 cycles at 2 A g-1), and high capacitive properties (225 F g-1 at 1 A g-1 and 163 F g-1 at 50 A g-1).