In order to achieve better energy saving effect of the super-capacitor energy storage system (SC-ESS), an on-line optimization control strategy is proposed in this paper. Firstly, the model of urban rail traction power supply system with super-capacitor energy storage system is established, and the working principle of ESS is analyzed. Then the paper analyzes the influence of train braking characteristics and headway on the energy saving effect, and gives the recommended setting range of charge threshold. A real-time optimization control strategy is proposed to adjust the charge and discharge threshold in real time according to the energy saving in a certain period of time, which can make the best energy saving effect of the SC-ESS. The control strategy based on the combination of offline optimization and real-time threshold adjustment, using genetic algorithm in multi-trains operation condition obtains threshold optimal control parameters, and the threshold is adjusted according to the working state of the ESS in actual operation. Simulation and experimental results demonstrate the effectiveness of the proposed control strategy.