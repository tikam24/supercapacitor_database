This paper aims at a hybrid tram with the onboard battery-supercapacitor storage system. This paper proposes an on-line strategy based on rolling state prediction (ROS). A wavelet neural network (WNN) is used to predict the running state of the tram in a certain period of time in the future according to the historic data, and the dynamic programming (DP) algorithm is used to optimize the energy management strategy (EMS) during the period. The strategy aims to optimize the system efficiency and battery life. Compared with classical rule-based (RB) strategy, ROS greatly increases the system efficiency and lengthens lifespan of battery and achieves real-time optimization.