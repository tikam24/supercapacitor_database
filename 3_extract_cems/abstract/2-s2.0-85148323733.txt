Supercapacitors are an important energy storage system for high-power applications with carbon electrodes. The heteroatom doping of carbon materials has been the focus of supercapacitor developments. Here, a feasible nitrogen/phosphorus/sulfur in situ codoping strategy to synthesize coal-based porous carbon electrode materials is achieved by simply co-heating porous carbon with phosphoric acid and ammonium persulfate. The constructed porous carbon anode shows a high charge transfer, an excellent rate capability of 83.79 F/g as well as a good cycling retention of 95.61% after 10,000 cycles. Two-dimensional perturbation correlation infrared spectroscopy and thermogravimetric-mass spectrometry-infrared coupled technology demonstrate that the addition of ammonium persulfate affects the reaction and results in a high yield through promoting dehydration of carboxyl and hydroxyl at low temperatures and delaying the oxidation of carbon atoms. This work provides insights into the evolution of functional groups and a route of high-value utilization of coal-derived materials.