In order to absorb the regenerative braking energy of trains, supercapacitor energy storage systems (ESS) are widely used in subways. Although wayside ESS are widely used, because of the influence of no-load voltage, and so on, a wayside ESS cannot absorb all the regenerative braking energy in some special cases, and the brake resistor is still activated, which leading to the wasting of energy. In order to completely replace the on-board brake resistor, this paper configures a certain on-board super-capacitor, and based on a DC-side series super-capacitor topology, proposes a hierarchical optimization energy management strategy (EMS). The EMS is divided into three layers: Firstly, the strategy can increase the inverter-side voltage in a short time without changing the traction network voltage, and improve the train braking characteristic curve by utilizing the short-time overvoltage capability of the inverter and the motor; Secondly, by coordinated control with a wayside supercapacitor, the residual regenerative braking energy can be absorbed even in special cases; Finally, based on loss calculation and current prediction, this strategy can effectively reduce the system loss by adjusting the DC voltage on the inverter-side. The proposed control strategy is validated through RT-LAB experiment, and the experimental results agree well with the theory.