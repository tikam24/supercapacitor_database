This paper describes a numerical study of the optimal distribution of energy between fuel cells and auxiliary energy storages in the hybrid train. Internal combustion engines (ICEs) are currently under pressure from environmental agencies due to their harmful gas emissions, and pure battery vehicles have a short range; a hybrid train powered by fuel cells, batteries, and supercapacitors can provide a viable propulsion solution. In this study, special energy management on the mountain railway with optimal power distribution and minimum hydrogen consumption is proposed. Considering the characteristics of the mountain railway, the vehicle uses recuperation of regenerative braking energy and thus charges additional power devices, and hybridization optimization gives favorable power to each power source device with a minimum consumption of hydrogen in the fuel cell. In this study, a simulation model was created in a Matlab/Simulink environment for the optimization of hybridized power systems on trains, and it can be easily modified for the hybridization of any type of train. Optimization was performed by using Sequential quadratic programming (SQP). The results show that this hybrid train topology has the ability to recover battery and supercapacitor state of charge (SOC) while meeting vehicle speed and propulsion power requirements. The effect of battery and supercapacitor parameters on power distribution and fuel consumption was also simulated.