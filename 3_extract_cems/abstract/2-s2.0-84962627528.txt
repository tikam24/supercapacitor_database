Photovoltaic (PV) power generation has many characteristics such as environmental protection. However, PV systems have strong randomness and will be influenced by weather conditions. So power quality problems will be caused when stand-alone PV system supplies power energy. Because energy storage systems could provide larger power in a short time, they will effectively solve the problems brought by stand-alone PV generation. This paper uses the mode of supercapacitors and storage battery hybrid energy storage. However, hybrid energy storage needs large capacity, is expensive and has low economic efficiency. Thus, it has great practical significance to reduce the cost of hybrid energy storage. Considering its fast computation speed and good astringency, improved quantum genetic algorithm is applied to precisely calculate the optima l ratio of the configuration in order to significantly reduce the cost of energy storage system. And this method is validated by a practical example.