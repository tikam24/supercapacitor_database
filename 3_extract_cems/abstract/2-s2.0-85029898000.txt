This paper studies an energy management problem for an isolated microgrid including photovoltaic panels, wind turbines, batteries and ultracapacitors. A normal form game is proposed for the energy management to maximize the energy utilization ratio of renewable energy sources, extend the battery life and keep the ultracapacitors able to compensate the dynamic variations. The solution of this game represented by Nash equillibrium is analytically derived and proved to be the existing and unique. A simulation platform using data in second is established to study the energy management approach based on probability distrubution funcions. In simulation, the game theory based approach has a comparable performance against the rule based control, while the pre-knowledge of the load demands and weather information is not required. Also the game theory based approach is more flexible than rule based approach under the influence of uncertain weather.