The microgrid based on distributed generation is one of the new forms of power system distribution network, and energy storage can provide important support for the access of distributed generation. Due to the shortcomings of the traditional photovoltaic microgrid energy storage method, the energy storage capacity is low. To improve the energy storage level of the photovoltaic microgrid, the robustness planning method of photovoltaic microgrid energy storage considering the flexibility resources of source, network and load is studied. Based on the flexibility resources of the microgrid, the balance index of flexibility supply and demand and the planning index of flexibility response capability is proposed. According to the source-network load algorithm, the optimal scheme of resource complementation is obtained. Based on the storage battery and supercapacitor of the photovoltaic microgrid, the photovoltaic microgrid energy storage robust configuration model is constructed. Comparing the energy storage planning method designed in this paper with two groups of traditional methods, the experimental results show that in the same energy storage time, the energy storage capacity of this method accounts for 50.49%, while that of the traditional group 1 and group 2 is 32.52% and 41.26%, respectively. The proposed PV microgrid robust planning method considering source-load flexibility is reasonable and effective in the energy storage resource allocation scheme, which is of great significance for promoting energy transformation and building a new power system.