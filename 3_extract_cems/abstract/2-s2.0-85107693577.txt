The photovoltaic DC microgrid model with impact load characteristics established in this paper makes the use of the rapid response of hybrid energy storage system composed of supercapacitors and batteries, which is used to reduce the peak and fill the valley. The improved bird swarm algorithm (IBSA) is used to optimize the model to solve the problem that the classical heuristic algorithm is easy to fall into local optimum. In this paper, the model refers to Levy flight strategy, uses Mantegna algorithm to represent random Levy step size, introduces inertia weight into foraging behavior, and uses different types of test functions to analyze the convergence effects. Based on the annual load output data measured by a residential district in Guilin City, the model is worked out with the parameters of energy storage system as the optimal configuration input parameters. Compared with the results of bird swarm algorithm, particle swarm algorithm and genetic algorithm, the algorithm has higher accuracy, efficiency and robustness, and has good convergence for solving the capacity planning problem of photovoltaic DC microgrid.