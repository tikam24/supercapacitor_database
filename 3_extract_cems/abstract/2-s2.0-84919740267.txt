Nitrogen-containing porous carbons with a high surface area, well developed micro/mesoporous structure, high nitrogen and oxygen contents, and good conductivity were synthesized from a novel nitrile-functional polybenzoxazine through a soft-templating method and KOH chemical activation. The introduction of a soft-templating agent into the precursors and the activation temperature have a significant effect on the pore structure and the surface chemistry. The existence of mesopores enhances the accessibility to the surface of the carbon framework and adequate utilization of the active adsorption sites. The material NPC-2 activated at 700 °C shows the highest gravimetric capacitance of 362.4 F g-1 at a current density of 1 A g-1 in KOH aqueous electrolyte, high rate capability and excellent cycling stability with a capacitance retention of 94.7% after 5000 cycles. As a solid adsorbent, the NPC-1 activated at 600 °C shows the highest CO2 uptakes at 1 bar of 6.20 and 3.95 mmol g-1 at 0 and 25 °C, respectively. It exhibits a remarkable selectivity for CO2/N2 separation and excellent recyclability. Such high performance as supercapacitor electrode materials and CO2 adsorbents can be attributed to the high surface area, optimal pore size distribution, superior electrical conductivity and the surface nitrogen functionalities in the carbon matrix.