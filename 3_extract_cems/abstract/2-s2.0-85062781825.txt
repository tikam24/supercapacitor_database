Supercapacitor/battery hybrid energy storage system (HESS) is an effective solution to suppress the power fluctuation of photovoltaic power generation systems during radiation changes. In this paper, the topology of HESS and its connection with photovoltaic systems are first analyzed. Second, a linear weighted summation equivalent filter based on variable weights is proposed to determine the power distribution between the supercapacitor and the battery, as well as the energy loss and the State of Charge (SOC) of the battery. A multipurpose optimization problem is constructed and solved to obtain current references of the energy storage components. Simulation results support the effectiveness of the proposed algorithm and control strategy.