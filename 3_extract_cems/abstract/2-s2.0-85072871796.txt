Microstructure regulation is of great significance to carbon based materials for desired applications in the fields of energy storage and conversion. Herein, we report the microstructure engineering towards porous carbon materials from the same precursor enabling multiple energy storage applications. Highly disordered carbon materials (HDCMs) and graphene-like carbon materials (GLCMs) can be obtained from one biomass waste of peanut dregs. Thanks to the ultrahigh surface area, relative narrow pore size, and disordered structure, the as-resulted HDCMs display high hydrogen uptake of 3.03%, and high specific capacitance of 449 F g−1 at a current density of 0.5 A g−1, outstanding rate capability as well as remarkable cycling performance. As anode materials for LIBs, the resultant GLCMs exhibit reversible capacity of 731 mAh g−1 at a current density of 100 mA g−1 and excellent cycling stability, owing to the high graphitization, lamellar structure, and dominant mesoporosity. These results demonstrate that this microstructural engineering approach is promising and efficient to design and controllable preparation of porous carbon materials for multiple desirable energy storage applications.