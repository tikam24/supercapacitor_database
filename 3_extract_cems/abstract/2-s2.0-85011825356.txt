Integration of wind and solar within dc microgrids into buildings is presented. First, a cache control method is applied to utilize a hybrid energy storage which combines diverse but complementary storage technologies. Second, an adaptive droop scheme is proposed to provide coordination control of a battery in real-Time and long-Term operation. Compared with other existing droop controls, it is distinguished in that the adaptive droop is proposed to force real-Time state of charge of battery to track on the optimized scheduled SOC in long-Term. Several simulations are performed to realize the presented method.