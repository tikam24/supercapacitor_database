The paper investigates the installation of energy storage systems (ESS) for a 3kV DC railway line located in the North of Italy. The main goals are to compensate voltage drops along the line and to regulate the system's voltage and to recover braking energy of trains. Electromechanical performances of trains and electrical system operation have been simulated by means of a software in order to evaluate the power demand of each train, the TPSSs (Traction Power Substations) power profile and voltage trend along the line, as well as the energy recovery and ESSs installation benefits. Two technological solutions regarding the design of ESS are described and simulated: lithium batteries and supercapacitors storage systems. The first solution is suggested due to the cost savings and the smaller requirements in terms of space occupation and total weight, while the second solution is suggested in case of great power and due to low levels of maintenance The analysis shows the benefits of the implementation of each type of ESS.