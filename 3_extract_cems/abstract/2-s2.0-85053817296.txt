A versatile precursor of protic ionic liquids ([Megl][HSO4]) was used to prepare N/S-codoped hierarchically porous carbon materials (N/S-HPC) by a double soft-template solvent-free self-assembly method. [Megl][HSO4] as carbon source, heteroatoms source and microporous forming agent, F127 as mesoporous soft-template and sodium dodecyl sulfate as macroporous soft-template have self-assembly in the curing process, and then are direct pyrolyzed to acquire N/S-HPC. The optimal sample shows large specific surface area of 1210 m2 g-1, high heteroatom doping (N: 5.31 at. %, S: 3.02 at. %, O: 5.56 at. %) and hierarchically porous structure with micropores (0.8-1.8 nm), mesopores (2.1-7.3 nm) and macropores (54-147 nm). The incorporation of N, S and O atoms into the carbon skeleton structure improves electrical conductivity and surface wettability, and provides additional pseudocapacitance. The results make N/S-HPC not only display high specific capacitance of 347 F g-1 at 0.5 A g-1 and still 174 F g-1 even at 20 A g-1 but also excellent cyclic stability of almost 100% capacitance retention for 5000 cycles in 6 M KOH electrolyte. Furthermore, the N/S-HPC still maintains excellent electrochemical property and stability under extreme temperatures (20-+100 °C) and bending (0°-180°). Meanwhile, the as-assembled symmetric supercapacitor displays a superior energy density of 15.8 Wh kg-1 at the power density of 212.4 W kg-1, outstanding capacitive performance of 157 F g-1 at 0.5 A g-1 with a large electrochemical window of 1.7 V in 1 M Na2SO4 electrolyte.