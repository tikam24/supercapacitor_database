The optimal operation of rail vehicle with on-board energy storage device minimizing total energy consumption is discussed in this paper. Until now, not enough research deals with the optimal control of the devices. The authors have developed the mathematical model based on a general optimization technique. In our study, the electric double layer capacitor (EDLC) is assumed as an energy storage device, because of its high power density etc. The proposed method can determine the optimal acceleration/deceleration and current commands at every sampling point under fixed conditions of transfer time and distance. The authors have also modified it for applying to catenary free operation. Using the proposed methods, simulations were implemented in some cases. The trend of optimal solutions such as values of control inputs and energy consumption is finally discussed.