The stationary supercapacitor energy storage system (SCESS) is one of effective approaches for the utilization of train's regenerative braking energy in urban rail systems. In this paper, the capacity configuration of SCESSs, the no-load voltage of substation, the control of onboard braking resistors and train operation diagrams are considered comprehensively. Based on the equivalent circuit model, the effects of traction power system parameters on the energy transmission between powering trains, braking trains and SCESSs are analyzed, and the relationships between the train operating parameters and system energy consumptions are revealed. A multi-variable synthetic optimization method is proposed to optimize the SCESS capacity, train operation diagrams and traction power system parameters collaboratively. In order to reduce the search space and improve the efficiency of the optimization algorithm, a hierarchical multi-objective optimization model is established, based on which the design variables and the control variables are optimized iteratively. And as the traffic density has a great impact on the regenerative braking energy distribution of the system, the optimization objective function fully considers the frequency distribution of headways throughout the day. Combined the Elitist Non-dominated Sorting Genetic Algorithm (NSGA-II) with the traction power flow simulator, the flowchart of the two-stage optimization algorithm is designed, and the pareto set of the multi-objective problem is obtained. The advantages of reducing system energy consumptions and configuration cost under the proposed algorithm are verified based on case studies of Beijing Batong Line.