Onboard energy storage system (ESS) is an important energy-saving technology in urban rail transit. The key issue of the ESS is the array configuration. In this paper, a new array configuration methodology is developed. First, the limitations of the capacity-constrained configuration method, which is mainly adopted for configuring the onboard supercapacitor array (OSA), are investigated. Second, a mathematical model of the OSA is developed taking into account power and capacity constraints so that the absorbed braking energy can be recovered. Finally, a power- and capacity-constrained configuration methodology (P&C-Method) is proposed. Digital simulation studies are conducted, and the results show that the OSA with the proposed P&C-Method can realize the effective energy recovery of the whole absorbed braking energy and have a high energy-saving effect/weight ratio. Â© 2012 IEEE.