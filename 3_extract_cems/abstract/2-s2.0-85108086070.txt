In electric double layer capacitors (EDLCs), the capacitance is produced by the electrostatic charge separation at the interface between the electrode and the electrolyte. Capacitive deionization (CDI) is a novel desalination technique which shares a similar working principle with EDLCs. Due to their similar working principles, highly efficient electrode materials for EDLCs and CDI have many similarities. In this report, N,S,O-co-doped porous carbon (NSO-PC) were prepared and used as bifunctional materials for EDLCs and CDI using buckwheat husk as a precursor and thiourea as a dopant. The double-edged sword effect of heteroatom doping was discussed in detail. When the ratio of thiourea to buckwheat husk was 2 : 1, the proposed NSO-PC exhibited high surface area, an interconnected micro-mesoporous structure, good EDLCs performance and could be used for constructing a symmetric supercapacitor. The symmetric supercapacitor could be used as an energy storage device for an LED array. The NSO-PC also displayed high electrosorption capacity (12.7 mg g-1 at 1.2 V in 500 mg L-1 NaCl solution), high charge efficiency (higher than 0.9) and good desalination-regeneration performance (the electrosorption capacity retention was 96% after 30 cycles) in CDI application. This study provides a bright way to develop bifunctional electrodes from agricultural waste for symmetric supercapacitors and CDI. This journal is