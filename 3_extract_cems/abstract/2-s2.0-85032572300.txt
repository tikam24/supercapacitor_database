Nitrogen-doped mesoporous carbons (NMCs) have been employed as electrode materials for energy storage devices such as lithium-ion batteries (LIBs) and supercapacitors due to their high accessible porosity and nitrogen content. However, how to maintain the structural stability of NMCs with abundant nitrogen atoms in their 2D honeycomb lattice is still a significant challenge. Herein, NMCs with a high nitrogen content of 18.86 wt% have been successfully synthesized via a self-assembly route in the presence of guanine as a nitrogen source. Furthermore, the nitrogen content and porosity of NMCs can be tuned by controlling the experimental conditions. Benefiting from the high N content, appropriate specific surface area (455 m2 g-1), and high accessible porosity, NMC exhibits superior electrochemical performance. This NMC anode for LIBs can retain a discharge capacity as high as 610 mA h g-1 with a coulombic efficiency of 98.5% after 50 cycles. In addition, it also displays good potential towards supercapacitor application with a specific capacitance of 227 F g-1 (in 6 M KOH) at a current density of 0.5 A g-1. The enhanced electrochemical performance could be attributed to both the low charge transfer resistance and the incremental electrochemical activity resulting from the existence of optimized nitrogen atoms.