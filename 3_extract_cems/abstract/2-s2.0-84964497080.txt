This paper studies a task scheduling problem for wireless sensor nodes that harvest energy from the ambient environment and use supercapacitors to store the scavenged energy. Power management for supercapacitor-based wireless sensor nodes usually takes into account the supercapacitor self-discharge characteristic. Recently, another supercapacitor characteristic called charge redistribution has also been investigated. This paper considers a task scheduling problem, which is a fundamental power management problem in wireless sensor networks, and develops a modified earliest deadline first (MEDF) algorithm based on supercapacitor charge redistribution and energy harvesting. The MEDF algorithm modifies the earliest deadline first (EDF) algorithm by taking into account the energy constraints of tasks in addition to their timing constraints. The MEDF algorithm is developed and implemented based on a model used to analyze the power flow in wireless sensor nodes. Two metrics are defined to evaluate the MEDF algorithm performance: deadline miss rate for timing performance and energy violation rate for energy performance. The MEDF algorithm is evaluated using both experiments and simulations. Measurement and simulation results show that the MEDF algorithm improves the energy performance of the EDF algorithm while maintaining its timing performance.