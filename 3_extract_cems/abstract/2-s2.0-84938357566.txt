Abstract Nitrogen (N), oxygen (O) and phosphorus (P) decorated porous carbon (PC) is in situ synthesized for supercapacitors by H<inf>3</inf>PO<inf>4</inf> activation of shrimp shell. The results show that shrimp shell with 5.32 wt% nitrogen, 30.1wt% carbon and 40.2 wt% oxygen is a good carbon precursor, and H<inf>3</inf>PO<inf>4</inf> plays an important role on the formation of porous structure and P doping. The contents of N, O and P functional groups in the resultant carbons along with their porosities are temperature-dependent. PCs with abundant pores and heteroatom functionalities are good electrode materials for supercapacitors in basic medium. Typically, PC with moderate N, O and P contents, large surface area and co-existence of mesopores with micropors exhibits a high specific capacitance of 206 F g<sup>-1</sup> at 0.1 A g<sup>-1</sup> in 6 M KOH solution. Furthermore, the energy density and power density of obtained PC electrodes can be substantially improved by widening the operation voltage window with the assistance of doped P. Specifically, its energy density can increase greatly from 2.9 Wh kg<sup>-1</sup> at 0.9 V to 5.2 Wh kg<sup>-1</sup> at 1.1 V. The present study demonstrates a feasible and effective strategy to develop high-performance supercapacitors economically from waste biomass and also helps to understand the roles of heteroatom on the electrochemical performances of PC electrodes.