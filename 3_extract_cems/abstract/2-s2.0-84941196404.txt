It is quite desirable but challenging to prepare highly active materials for various energy storage applications at low cost. Here, an efficient strategy to produce nitrogen-enriched hierarchical porous carbon (N-HPC) is reported by facile pyrolysis of magnesium citrate and subsequent NH<inf>3</inf> treatment. As-prepared N-HPC presents a developed hierarchical micro- and trimodal meso-porosity with a high specific surface area of 1290 m<sup>2</sup> g<sup>-1</sup> and pore volume of 3.04 cm<sup>3</sup> g<sup>-1</sup>. It also shows an abundant nitrogen doping of 3.6%. When used for electrochemical electrodes in supercapacitors and lithium-sulfur (Li-S) batteries, significantly enhanced performances have been obtained compared with commercially available activated carbon. In supercapacitor testing, the N-HPC electrode shows a specific capacitance of 101 F g<sup>-1</sup> in a nonaqueous electrolyte. And the capacitance retains 67% even at a 200-fold charge/discharge rate. Moreover, its performance in Li-S batteries is more outstanding. It enables a very high sulfur loading (76.2% by weight) and the resulting N-HPC/S cathode shows high discharge capacities of 1153 mA h g<sup>-1</sup><inf>sulfur</inf> (or 702 mA h g<sup>-1</sup><inf>electrode</inf>) at 0.2C and 671 mA h g<sup>-1</sup> even at 4C. And it still remains 600 mA h g<sup>-1</sup> over 300 charge/discharge cycles at 1C with an average coulombic efficiency of 99.0%.