This paper presents an energy management algorithm based on a new adaptive filtering method for a multi-sources battery-ultracapacitor electric vehicle. Compared to literature where most of the filtering techniques are developed based on empirical knowledge of the system, the proposed adaptation method is performed online to optimize a cost function that considers the state of charge of the ultracapacitor. The developed approach allows a better power sharing between both electric sources while respecting their constraints and physical limitations. Simulations on Matlab/Simulink validate the performances of the proposed method.