For improving the energy efficiency of railway systems, onboard energy storage devices (OESDs) have been applied to assist the traction and recover the regenerative energy. This article aims to address the optimal sizing problem of OESDs to minimize the catenary energy consumption for practical train operations. By employing a mixed-integer linear programming (MILP) model based on energy flow and the law of conservation of energy, three types of widely used OESD - supercapacitors, Li-ion batteries, and flywheels - have been studied in a real-world case of the Beijing Changping line. Results show that without the constraints of capital cost and volume, the supercapacitor, Li-ion battery, and flywheel with optimized capacity can save the catenary energy consumption by 23.6%, 22.9%, and 23.7% compared with the cases without OESDs, respectively. The minimum catenary energy consumption for each type of OESD has also been found with the constraints of capital cost and volume. The study shows that with a volume constraint less than 0.6 m3 and a higher allowed capital cost more than 20 k$, flywheel tends to achieve the least catenary energy consumption. When the volume is relaxed to go beyond 0.6 m3, supercapacitors always achieve the minimum catenary energy consumption disregarding the constraint of capital cost.