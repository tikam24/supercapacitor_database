Nitrogen-rich and porous carbon materials have attracted great attention for supercapacitors due to the relatively large specific surface area, highly active N species and good electrical conductivity. However, it is still a challenge to precisely regulate the above characteristics simultaneously. Here artful sol-gel-assisted inorganic template methods are proposed by using melamine and polyethylene glycol (PEG) as complement and magnesium nitrate as inorganic salt to prepare nitrogen-rich hierarchical porous carbon with three different pore structure (1.75 nm, 3.8 nm and 9.07 nm), giving the opportunity to regulate the specific surface area and pore size distribution of the carbon materials. The designer porous carbon possesses more than 9 at. % of the pyridinic nitrogen (N-6) and pyrrolic nitrogen (N-5), a high specific surface area of 917.0 m2 g−1 and good electrical conductivity (1.28 S cm−1). All these factors result in a specific capacitance up to 371 F g−1 at 1 A g−1 and excellent cycle stability (retain 98.3 % capacitance after 10000 cycles).