Nitrogen and oxygen heteroatom doped porous carbon frameworks (HPCFs) have been constructed through the structural evolution of 2D microporous Schiff-base frameworks from the rigid polyquinoneimine and trigonal-symmetrical triformylphloroglucinol. Owing to its predictable and controllable nitrogen and oxygen doping and pore structures, the derived HPCF material exhibits good electrochemical properties as a supercapacitor electrode with remarkable specific capacitance (479.5 F g-1 at 0.1 A g-1 and 125 F g-1 at 10 A g-1) and excellent long-term cycling stability over 10000 cycles. The combined effect of heteroatom doping and micropores on its electrochemical performance as a supercapacitor electrode is thoroughly investigated. According to the analysis of the electrochemical behavior, pores larger than 5 Ã… in HPCFs are effective for electrical double-layer capacitance, which is associated with the size of hydrated ions. With regard to the heteroatoms, while the quaternary nitrogen functionalities can improve electron transfer, pyrrolic and pyridinic nitrogens as well as quinone oxygen are the most conducive functional groups for pseudocapacitive performance.