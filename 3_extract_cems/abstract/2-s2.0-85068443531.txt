Biomass-based hierarchically porous carbon is green and eco-friendly, which exhibits a wide potential for energy storage due to its large specific surface area and multiheteroatoms codoping. Herein, nitrogen (N), phosphorus (P), and sulfur (S) self-doped hierarchically porous carbon (N-P-S-HPC) has been prepared by a one-step method from a peanut meal for the first time. The as-prepared N-P-S-HPC possesses a typical hierarchically porous framework (micropores, mesopores, and macropores) with an extremely large specific surface area (2090 m2 g-1) and N (11.2 atomic %), P (0.82 atomic %), and S (0.64 atomic %) doping. N-P-S-HPC as an electrode for supercapacitors displays an ultrahigh specific capacitance of 525 F g-1 (1 A g-1) with the contributions of electrical double layer capacitance (EDLC) and pseudocapacitance (PC). Remarkably, the capacitance retention of N-P-S-HPC reaches up to 68% (10 A g-1). The N-P-S-HPC//N-P-S-HPC symmetrical supercapacitor delivers a maximum energy density (24.9 Wh kg-1 at 400 W kg-1). After 6000 cycles at 300 mV s-1, the capacitance loss is only 10%, indicating excellent cycling stability of the peanut meal converted N-P-S-HPC, which enables it to be a promising candidate for energy storage and renewable delivery devices.