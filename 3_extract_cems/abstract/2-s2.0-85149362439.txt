The rational design of catalysts’ spatial structure is vitally important to boost catalytic performance by exposing the active sites and increasing specific surface area. Herein, the heteroatom doping and morphology of CoNi metal-organic frameworks(MOF) are modulated by controlling the volume of ionic liquid used in synthesis and generating CoSe2-NiSe2 heterojunction structures wrapped by N, P, F tri-doped carbon(NPFC) after a selenisation process. Notably, the unique cubic porous structure of CoSe2-NiSe2/NPFC results in a specific surface five times that of the sheet-like hollow structure produced without ionic liquid. Moreover, the charge redistribution during heterojunction formation is verified in detail using synchrotron radiation. Density functional theory calculations reveal that the formation of heterojunctions and doping of heteroatoms successfully lower the ΔGH* and ΔGOH* values. Consequently, CoSe2-NiSe2/NPFC exhibits excellent activity for HER in both acidic and alkaline solutions. Meanwhile, CoSe2-NiSe2/NPFC as a cathode material exhibits excellent performance in a flexible solid-state supercapacitor, with a superior energy density of 55.7 Wh kg−1 at an extremely high-power density of 15.9 kW kg−1. This material design provides new ideas for not only using ionic liquids to modulate the morphology of MOFs but also deriving heterojunctions and heteroatom-doped carbon from MOFs.