Microgrids represent a promising energetic scenario applicable in different contexts, especially in residential clusters. In this paper, authors propose a novel control logic to implement a coordinated management of generators, loads, and hybrid energy storage systems (HESS) in a microgrid by means of a hierarchical smart converter architecture. The innovative algorithm is embedded in a master converter. It allows the online management of energetic fluxes in cooperation with slave converters distributed among the microgrid resources. They carry out a smart coordination of microgrid generation, absorption, and battery-supercapacitor storage systems with the aim to improve the availability of the storage systems for providing ancillary services to the power grid. The effectiveness of the control is tested applying the smart converter master-slave architecture, including the combined management BESS-supercapacitor algorithm, to a grid-connected residential microgrid.