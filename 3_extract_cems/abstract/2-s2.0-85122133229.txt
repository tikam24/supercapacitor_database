The microporous carbon with large surface area is widely used in supercapacitors. However, the sluggish ion transport kinetics drastically hampers the practical application. Herein, an efficient in-situ expansion strategy for the preparation of hierarchically structured mesoporous carbon is developed by the pyrolysis of sodium lignosulfonate with HCOOK. Various techniques including in-situ methods are employed and the formation mechanism of the hierarchical mesoporous structure is thus clarified. The grain refinement, crystal rearrangement and in-situ expansion enable the formation of the unique porous carbon with a high mesoporous volume, an interconnected and hierarchical porous structure and a large ion-accessible specific surface area. The specific capacitance and capacitance retention of the obtained sample reach 436 F g−1 (1 A g−1) and 64% at 100 A g−1 in the aqueous electrolyte in a three-electrode system. Moreover, the obtained sample also shows a high energy density of 41.2 Wh kg−1 in a two-electrode system using ionic liquid as electrolyte. The novel in-situ route can be extended to the synthesis of other biomass-based carbon materials for electrochemical applications.