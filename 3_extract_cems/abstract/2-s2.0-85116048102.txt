This paper presents a system for compensating DC link current pulsation in four-wire inverters with energy storage operating under unbalanced load conditions. This phenomenon occurs when an inverter with an independent power control in each of the phases attempts to locally balance the voltage imbalance in the grid. Such a condition creates a DC link current pulsation, which is destructive for energy storage connected to the DC link. The conditions when this situation appears are presented in detail in the paper. A solution to this problem is proposed in the form of a dual active bridge converter and a capacitor bank to actively compensate this pulsation. The control algorithm is proposed based on a proportional-resonant controller. This paper presents the technical background and method by which the controller parameters were calculated, implemented and tested in a real-time system. The test results are presented and discussed, concluding that the proposed solution is an attractive option for protecting the energy storage from DC link current pulsation. The dual active bridge converter combined with resonant controller can compensate the DC link current pulsation almost entirely.