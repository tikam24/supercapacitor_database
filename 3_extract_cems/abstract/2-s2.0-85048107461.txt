This paper demonstrates a facile method based on vapor-solid reaction between magnesium powder and carbon disulfide vapor to produce S-doped porous carbon. The property of the as-prepared carbon is tunable by varying the synthesis temperature. The sample synthesized at 600 °C shows the highest specific surface area, suitable for supercapacitor electrodes. A high specific capacitance of 283 F g-1 in H2SO4 aqueous electrolyte is achieved. The best performance of porous carbon for a Li-ion battery anode is obtained at the optimal temperature of 680 °C. Owing to the well-balanced soft and hard carbon compositions in the material, this porous carbon exhibits a high reversible capacity of 1440 mA h g-1 and excellent rate performance.