Capacitive carbons are attractive for energy storage on account of their superior rate and cycling performance over traditional battery materials, but they usually suffer from a far lower volumetric energy density. Starting with expanded graphene, a simple, multifunctional molten sodium amide treatment for the preparation of high-density graphene with high capacitive performance in both aqueous and lithium battery electrolytes is reported. The molten sodium amide can condense the expanded graphene, lead to nitrogen doping and, what is more important, create moderate in-plane nanopores on graphene to serve as ion access shortcuts in dense graphene stacks. The resulting high-density graphene electrode can deliver a volumetric capacitance of 522 F cm−3 in a potassium hydroxide electrolyte; and in a lithium-ion battery electrolyte, it exhibits a gravimetric and volumetric energy density of 618 W h kg−1 and 740 W h L−1, respectively, and even outperforms commercial LiFePO4.