This paper proposes an optimal allocation method of hybrid energy storage capacity with the goal of maximizing annual income aiming at coping cope with the adverse effects of randomness and volatility of photovoltaic power generation and electric vehicle charging on the distribution network of smart park. And the hybrid energy storage system consists of supercapacitors and lithium batteries. It can not only meet the demand for stabilizing power fluctuations, but also store electricity at low prices and sell electricity to the grid at high prices. A hybrid energy storage capacity allocation method based on time-of-use price is proposed, which allocates and optimizes the power and capacity of supercapacitors and lithium batteries respectively, and improves the income of hybrid energy storage system. Finally, the model is established, and the adaptive particle swarm algorithm (APSO) is used to verify the effectiveness of the method.