This paper deals with design and simulation of a hybrid electrical energy storage (HEES) for Esfahan urban railway under regenerative braking condition. The HEES presented in this paper, is comprised of battery and supercapacitor. The capacity of the supercapacitor and battery is calculated based on regenerative braking energy from each train considering other trains acceleration, normal traveling, and braking. This paper presents an algorithm and its control system for DC/DC converters in order to store regenerative braking energy in supercapacitor-battery, and to feed auxiliary system. Simulation results carried out by MATLAB/Simulink confirm the effective performance of the presented algorithm and control system.