Photoelectrochromic supercapacitors (PESC) can solve the output power problem of photovoltaic devices by storing electrical energy and controlling energy output and reflect the energy state of the device through color changes. In this paper, the tungsten trioxide (WO3) and polyaniline (PANI) electrochromic layers are prepared as the electrode of the ESC by the continuous ionic layer adsorption reaction (SILAR) method. As a p-type conjugated polymer, PANI can form a donor–acceptor structure with WO3 promoting the separation of electron-hole pairs, increasing the number of electrons involved in electrochromism and improving the reaction rate. The WO3@PANI double-layer ESC obtains specific capacitance of 46.3 mF cm−2 and long-term cycling stability (capacity retention rate of 85 % after 3000 cycles). The photocharging voltage of the WO3@PANI double-layer PESC can reach 0.58 V and obtain specific capacitance of 147.8 mF cm−2 at the current density of 0.1 mA cm−2. The PESC can display good electrochromic performance (from green to blue within 13 s) driven by both light and electricity. These results reveal the potential of the double-layer PESC based on WO3@PANI in developing the diversity of electrochromic devices and photovoltaic devices.