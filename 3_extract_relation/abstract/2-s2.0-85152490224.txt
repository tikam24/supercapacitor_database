The precise design of heteroatom-doped carbon with large specific surface area, high conductivity and abundant active sites is profound significance for next-generation electrochemical energy storage devices. Covalent organic frameworks (COFs), emerging as novel crystalline porous polymers, have provided a versatile and powerful platform for complex structural construction and tailor-made functional exploitation. Herein, several kinds of hierarchical porous heteroatom-doped carbons frameworks have been achieved, therein, the topology design furnishes guidance for the structural tiling of extended porous polygons, while the in situ polycondensation reaction provides synthetic procedures to make them true, and then the high-temperature carbonization converts the crystalline COFs into highly conductive heteroatoms-doped meso/microporous carbon frameworks. As the result, the optimal N,O-doped carbon nanosheets demonstrate a high heteroatom content, large specific surface area and superior electrochemical performance with a high energy density of 15.28 Wh kg−1 at 352.5 W kg−1. This strategy not only supplies an efficient approach to obtain heteroatom-doped carbon with a high mass density and high porosity, but also paves the way for the precise design of the structure and activity centers for high-quality energy materials.