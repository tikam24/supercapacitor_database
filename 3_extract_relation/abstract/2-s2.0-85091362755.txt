Combining complementarity services such as frequency containment reserve (FCR) and photovoltaic self-consumption (PV SFC) can increase revenues for household-prosumers supported by battery/supercapacitor-based hybrid energy storage systems (HESSs). Nonetheless, to calculate the best financial profitability, optimization algorithms should be applied to power and energy management as well as component sizing. For this purpose, this research developed a four-dimensional optimization algorithm based on the teaching-learning-based optimization (TLBO) method. The optimization of management strategies was based on wavelet transform. An objective function was expressed in economic terms, including the investment, cycling, energy exchange and FCR provision, among other costs. Furthermore, a battery durability model was introduced. This algorithm was illustrated by a case study in Spain. The algorithm not only determined the optimal management, but also the best overall component sizing. A HESS was found to be a cost-effective way of enhancing PV SFC and providing FCR by increasing the profitability of the asset. Planning both complementarity services led to maximum revenues. The results showed that the optimal supercapacitor hybridization was 3.98–10.50%, depending on the planned services. This increased the profitability of battery-only configurations by more than 5.37–10.37%. Battery aging played a crucial role because of replacement cost.