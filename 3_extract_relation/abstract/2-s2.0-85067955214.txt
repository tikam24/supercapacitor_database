This paper deals with the design and stability analysis of a dc microgrid with battery-supercapacitor energy storage system under variable supercapacitor operating voltage. The conventional design method reported in the literature considers the rated supercapacitor voltage in the modeling and design of controllers. However, the supercapacitor unit can discharge as low as 10% of its rated voltage due to self discharge. It is observed that the conventional method of controller design can potentially make the system unstable or introduce ringing in the dc link voltage at low supercapacitor voltage. In this paper, the sensitivity of dc microgrid stability with respect to supercapacitor voltage variation is analyzed, an optimal supercapacitor voltage to be considered in the design is calculated and a design method is proposed to ensure the stability of dc microgrid in all operating modes. The stability of the dc microgrid with controllers designed using the proposed method is evaluated with digital simulation and experimental studies.