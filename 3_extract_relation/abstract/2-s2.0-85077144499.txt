Heteroatom-doped hierarchical porous carbons with large specific surface area and high heteroatom content are important but they generally require multistep syntheses and harsh conditions. Herein, a scalable and straightforward strategy is introduced to synthesize N/O co-doped hierarchical porous carbons (DNKs) derived from an all-in-one phthalonitrile precursor 1,3-bis(3,4-dicyanophenoxy)benzene (DPPH) with the assistant of potassium hydroxide and urea. In this facile and template-free method, all the raw materials are placed in the tube furnace, and the one-pot process involves polymerization, carbonization and activation. At 1 bar, ultra-high CO2 uptake of 7.27 mmol g−1 at 273 K was achieved for the sample DNK@550, which can be attribute to its well-developed micropore structure and abundant nitrogen content (7.93 wt%). Moreover, the distinct features of DNK@650 afforded a high specific capacitance of 487 F g−1 at a current density of 0.1 A g−1 in a three-electrode system using 1 M H2SO4 aqueous as electrolyte. Most importantly, the fabricated symmetric supercapacitor exhibited excellent cycling stability over a new cycle record of 100000 (capacitor retention of ca. 103%). This work provides new insights for the fabrication of versatile porous carbons from readily available and flexible precursors via a facile and scalable route.