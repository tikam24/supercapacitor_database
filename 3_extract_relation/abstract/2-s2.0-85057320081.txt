In this work, simultaneous energy regeneration and motion control for robot manipulators with brushless motors is considered. The robot has a number of semi-active joints connected to ultracapacitors, while the remaining joints are fully-active, powered from constant-voltage power supplies. A three-phase inverter is used to apply voltage to each motor, and the space vector pulse width modulation technique is used to generate voltage commands for the inverter. A PI controller is used to generate voltage commands for the inverter based on reference currents. A method is developed to obtain actual torque based on the desired torque generated by a virtual controller, which can be any suitable robot motion control algorithm, for instance inverse dynamics. A novel optimization approach is used to generate reference currents that maximize the amount of regenerative energy stored in the ultracapacitor and motor inductance subject to the torque demanded by the virtual controller. An explicit solution is found for the optimal current references and it is shown that the well-known choice of a zero direct current component in the direct-quadrature frame is sub-optimal relative to our energy optimization objective. A simulation using a 2-link planar manipulator with one active and one semi-active joint is used to illustrate the results.