Solar-driven electrochromic smart windows with energy-storage ability are promising for energy-saving buildings. In this work, a flexible photoelectrochromic device (PECD) was designed for this purpose. The PECD is composed of two flexible transparent conductive layers, a photocatalytic layer, an electrochromic material layer, and a transparent electrolyte layer. The photocatalytic layer is a dye-sensitized TiO2 thick film and the electrochromic layer is a WO3 thin film, which also possesses a supercapacitive property. Under illumination, dye-sensitized TiO2 thick film realizes photo-drive electrochromism that the WO3 changes from colorless to blue with large optical modulation. Meanwhile, the PECD has an electrochemical supercapacitance showing an energy storage property of 21 mF•cm-2 (114.9F•g-2 vs the mass of WO3), stable mechanical performance and long cycle performance. The PECD can effectively adjust the transmittance of visible and near-infrared light without any external power supply, realizing zero energy consumption, and can convert solar energy into electrical energy for storage.