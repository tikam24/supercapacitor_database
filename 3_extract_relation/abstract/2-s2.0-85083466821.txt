This paper presents an algorithm considering both power control and power management for a full direct current (DC) microgrid, which combines grid-connected and islanded operational modes, with real-time demand-side management optimization. The full microgrid is a hybrid dynamic system model consisting of two interacting parts: continuous-time dynamics and discrete-event dynamics. Such a full microgrid consists of photovoltaic sources, a DC load, battery storage systems, supercapacitor storage, a diesel generator, and a public grid connection, all connected on a DC common bus. This full microgrid is more reliable than a microgrid with only renewable sources or with only traditional energy sources, considering the power constraints imposed by the public grid as well as the sluggish dynamic of the diesel generator, self-discharging characteristic of the supercapacitor, and load shedding optimization. Meanwhile, this algorithm can automatically switch between grid-connected and islanded operational modes to optimize the power of the load shedding, take advantage of renewable energy, and keep the power balance in the full DC microgrid. The results under MATLAB/Simulink verify that the real-time control algorithm can maintain the power balance in real-time for the whole day and satisfy the power management strategy.