Energy storage systems (ESSs) represent an established solution for energy saving and voltage regulation in DC urban railway systems. In particular, ESSs can store the braking energy of light rail vehicles (LRVs) and support the DC feeder system during traction operations. Moreover, ESSs can significantly improve the operating conditions of the AC supply system by reducing voltage drops and current spikes. This paper investigates the impact on the bus voltages and branch currents of the AC grid of wayside and on-board ESSs supporting the DC railway infrastructure. An iterative algorithm solves the decoupled AC/DC power flow considering the 3-phase bridge rectifier model of traction substations. The work presents a novel mathematical formulation of the optimization problem to solve the positioning and sizing of supercapacitor-based wayside ESSs, considering both DC and AC network constraints. The effectiveness of the proposed method is proved through numerical simulations on a real Italian DC railway system. Obtained results are presented and discussed comparing the proposed methodology to several existing literature solutions.