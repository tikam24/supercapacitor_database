Replacing conventional generating units with inverter-based generation has lowered the natural inertia of power grids and the primary frequency control reserve provided by synchronous generators. Some of the most important consequences include large frequency deviations and large rates of change of frequency (RoCoF) during sudden load and generation loss. Increasing the inertia of the grid through virtual inertia and synchronous machines, and fast primary frequency response are possible solutions for these problems. This paper proposes an optimization problem to determine the capacity of ultracapacitors and synchronous condensers installed at each bus for inertial response and also the optimal amount of fast primary frequency response while considering technical and economic metrics. A combinational model is proposed to calculate the values of these technical metrics, which results in acceptable accuracy and computational cost. Finally, a modified low-inertia version of the IEEE 39-bus test system is used to verify the effectiveness of the proposed method. The results show that the method is successful in keeping the RoCoF and frequency deviations within acceptable limits while reaching a compromise between technical and economic aspects.