This paper proposes a multi-level control and optimization scheme, including grid control and node control, for an islanded 48-V PV-based low-voltage dc (LVdc) microgrid that aims to overcome the drawbacks of centralized and decentralized control schemes. The analyzed microgrid includes a 20-kW rooftop solar system as the main power source with distributed compensation systems. The central supervisory controller is responsible for updating grid characteristics and sending/receiving information to/from local node controllers, which are responsible for bus voltage regulation and energy management. The control hierarchy features optimized and safe operation (charge and discharge) of storage devices in dc microgrids. The paper also demonstrates the application of battery-supercapacitor systems to absorb system transients during load changes. The simulation showcases the continuous flow of information and decision processes via each level of control, while simultaneously taking the constraints of each subsystem into consideration. The scheme has been simulated in MATLAB/Simulink environment for various case studies to evaluate system stability and robustness. Further, the proposed scheme has been tested experimentally with its prototype and its results are explored.