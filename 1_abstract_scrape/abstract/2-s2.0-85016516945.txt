In this paper, a control of bidirectional Quasi-Z-Source Inverter (qZSI) with energy storage (batteries and supercapacitors) for photovoltaic power generation systems is presented. The quasi-Z-source inverter (qZSI) provides an alternative for the conventional two stages DC-DC/DC-AC photovoltaic (PV) based inverter system. The batteries and supercapacitors are used for compensate the necessitate power occurred in internal or external system parameters circumstances. The main objective of this study is to propose a suitable active and reactive power control for injecting or recovering the power between the electrical grid and PV system (batteries). For adjust the problem of rapid variation of climatic and the power grid conditions, the supercapacitors are controlled with buck-boost converter. Many simulation results obtained using MATLAB/SIMULINK in different rigorous situations show the performance of the proposed system.