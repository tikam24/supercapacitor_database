Urban rail trains have undergone rapid development in recent years due to their punctuality, high capacity and energy efficiency. Urban trains require frequent start/stop operations and are, therefore, prone to high energy losses. As trains have high inertia, the energy that can be recovered from braking comes in short bursts of high power. To effectively recover such braking energy, an onboard supercapacitor system based on a radial basis function neural network-based sliding mode control system is proposed, which provides robust adaptive performance. The supercapacitor energy storage system is connected to a bidirectional DC/DC converter to provide traction energy or absorb regenerative braking energy. In the Boost and Buck modes, the state-space averaging method is used to establish a model and perform exact linearization. An adaptive sliding mode controller is designed, and simulation results show that it can effectively solve the problems of low energy utilization and large voltage fluctuations in urban rail electricity grids, and maximise the recovery and utilization of regenerative braking energy.