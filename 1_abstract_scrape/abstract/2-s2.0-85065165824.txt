The installation of stationary supercapacitor energy storage systems in urban rail transit will effectively recover the regenerative braking energy of the trains and reduce the energy consumption of the system. The substations, powering/brake trains and energy storage systems(ESSs) conduct energy interactions in real time through traction networks, and constitute a complex multi-energy coupling system. Therefore, in order to improve the overall energy efficiency and reduce investment costs, a synthetic optimization method for power system parameters and ESS capacity configuration is proposed in this paper. Firstly, the equivalent circuit models for different train operation scenarios are established, and the influence of no-load voltage and the starting voltage of the braking resistor on the energy transmission efficiency and effective distance between the substations, trains and ESSs is analyzed; Secondly, a multi-objective optimization problem considering energy consumption and investment cost is established, and the NSGA-II optimization algorithm is combined with the traction power flow calculation to solve the problem. Finally, a case study based on Beijing Metro Batong line is presented, and the pareto optimal solution is obtained with the synthetic optimization method. Results show that in comparison with ESS-only optimization, the energy saving rate is effectively improved with the synthetic optimization.