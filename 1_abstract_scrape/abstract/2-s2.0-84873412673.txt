Hierarchical porous carbons were prepared from a coal liquefaction residue (CLR) and two coals, Shenhua (SH) coal with low and Shengli (SL) coal with high ash content, by KOH activation with the addition of some additives, and used as the electrode for supercapacitors. Two metal oxides (MgO and Al 2O3) and three organic materials (sugar, urea and cetyltrimethylammonium bromide) were used as the additives, to investigate their effects on the structure and capacitive performance of the resultant carbons. The results show that the metal oxide and/or its salt formed by the reaction with KOH can serve as space fillers of nanopores in the carbonized carbon, while the gases produced by the decomposition of the organic additive can develop and/or widen some pores. Both help the carbon produced from CLR or the SH coal with low ash content to have additional meso- and macropores, but destroy the structure of the carbon from the SL coal with high ash content. Compared with the carbon without any additive, the optimized hierarchical porous carbon with each additive shows a smaller equivalent resistance, much higher capacitance in a wide range of charge-discharge rates and excellent cycle stability when the carbon was used as supercapacitor electrode. Â© 2012 Elsevier Ltd. All rights reserved.