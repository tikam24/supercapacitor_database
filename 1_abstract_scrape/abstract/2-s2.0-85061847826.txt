In order to study the energy management problems of a tram based on fuel cell, ultracapacitor and battery, the hybrid powertrain system structure and operation characteristics of tram are introduced, then an energy management strategy based on system operation mode is proposed, and the switching of the operation mode is achieved through a number of control parameters. Due to the uncertainty of the control parameters in the energy management strategy based on system operation mode, the minimum configuration cost of ultracapacitor and battery, the energy consumption of tram operation, punctuality and precise positioning parking are taken as the optimization goals, the multi-objective genetic algorithm(GA) is applied to optimize the control parameters in the control strategy. Taking a domestic planning line as an example, the optimization analysis is carried out in the system simulation model which has been verified by test data of a real tram, optimization results show that the total traction energy of the optimized tram is reduced by about 12.5% without sacrificing tram dynamic performance, the recovered regenerative braking energy is increased by about 14.5%, and the average efficiency of the fuel cell is increased by about 0.83%. Meanwhile, the minimum configuration of the ultracapacitor pack and battery pack are obtained by optimization, which provides the reference for the redundant configuration of the energy storage system.