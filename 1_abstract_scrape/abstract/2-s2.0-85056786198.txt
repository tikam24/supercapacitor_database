Nitrogen-doped porous carbons have been extensively investigated to improve the specific capacitance in aqueous electrolytes by increasing the specific surface area and nitrogen content and by optimizing the pore structure. However, research on the effect of electrolyte cations on the specific capacitance of these materials is rare, especially for neutral electrolytes. Herein, a nitrogen-rich hierarchically porous carbon (NRHPC) with a high nitrogen content of 12.3 atm% is successfully prepared by pyrolyzing a mixture of bagasse, K2CO3 and urea in a mass ratio of 2:1:4. It is found that NRHPC shows superior electrochemical performance in MgSO4 than in Li2SO4 electrolyte, with specific capacitances of 315.0, 274.4, and 188.1 F g−1 at 1.0, 10.0, and 100 A g−1, respectively. Furthermore, it is found that the capacitance enhancement is closely related to the nitrogen content of the porous carbon materials. Theoretical calculation reveals that the Mg2+ ions have higher affinity towards the N atoms than Li+, producing higher charge storage capability via interaction between the Mg2+ and N atoms. When the 1.0 M MgSO4 is used as electrolyte, a symmetric capacitor based on the nitrogen-rich hierarchically porous carbon shows a high energy density of 39.5 Wh kg−1 at a power density of 0.9 kW kg−1. Moreover, this as-assembled device displays superior long-term cycling stability, with a capacitance retention of >96.2% after 10,000 cycles at 10.0 A g−1.