In marine applications all-electric propulsion systems are employed on surface ships that are subjected to particular constraints, generally due to environmental restrictions. The technological advancement of electrochemical batteries, which are today characterized by higher capacity and efficiency, has widened their fields of application, although these storage systems require an accurate design to limit their initial and maintenance costs. In order to reduce battery charge and discharge peak currents, supercapacitor modules are generally adopted with the aim to extend batteries expected life. The proper management of energy fluxes within the hybrid architecture, and in particular among batteries, capacitors and loads requires a specific control, called EMS - Energy Management Strategy. In this paper, a novel EMS, based on constrained minimization problem, is proposed and verified with reference to a case study of a waterbus operating in restricted waterways on different routes. The procedure is based on a preliminary solution of an off-line optimization with respect to a known mission profile. Hence, a real-time control strategy is properly evaluated, in order to guarantee robustness against the unavoidable uncertainties, which occur during the operating conditions. In the last part of the paper, a numerical application is presented with the purpose to emphasize the feasibility of the proposal.