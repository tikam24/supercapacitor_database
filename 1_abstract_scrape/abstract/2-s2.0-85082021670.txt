Polyaniline-derived oxygen- and nitrogen-decorated hierarchical porous carbons (N/O-HPC) are easily prepared by fast electrochemical polymerization combined with pyrolysis process. During the heating process, perchloric acid was decomposed to produce oxygen which could react with PANI-derived carbon to form a porous structure. The XPS results show the content of oxygen and nitrogen functional groups in the porous carbon matrix is 4.31% and 4.42%, respectively, and the BET results show that the specific surface area of the porous carbon is 1197.4 m2 g−1. The high content of oxygen and nitrogen functional groups as well as the high specific surface area is beneficial to N/O-HPC materials as supercapacitors. Typically, N/O-HPC displays a high specific capacitance of 419.8 F g−1, 179.8 F g−1, and 343.2 F g−1 at 0.2 A g−1 in 1 M H2SO4, 0.5 M K2SO4, and 6 M KOH electrolytes, respectively. Specially, the maintenance of capacitance is over 93% after 5000 cycles at 5 A g−1 in all three electrolyte solutions. The outstanding electrochemical performance of N/O-HPC can be ascribed to the introduction of nitrogen and oxygen functional groups in porous carbon matrix and the formation of special porous structure.