Battery/ultracapacitor hybrid energy storage systems have been widely studied in electric vehicles to prolong batteries' cycle life, where the energy management strategy plays a vital role to distribute the load power in real time and to optimize the vehicle economy simultaneously. This paper proposes a hierarchical energy management strategy using sequential quadratic programming and neural network (NN) for a semi-active battery/ultracapacitor hybrid energy storage systems to minimize the battery degradation cost and the electricity cost. In the off-line optimization level, a cost function of battery degradation cost and electricity cost is constructed. Sequential quadratic programming is performed to determine the optimal current reference of ultracapacitors, i.e., the output of the NN. While the load current, velocity, acceleration, the last battery current and ultracapacitor SoC are selected as inputs to train NN until the parameters converge. In the on-line implementation level, the trained NN provides the quasi-optimal reference of ultracapacitor current based on the real-time data. Circuit simulation results on NEDC driving cycle reveal that the proposed strategy can guarantee the ultracapacitor state-of-charge limitations. When compared with the adaptive filter-based method and the near-optimal rule-based method from dynamic programming, a 10.1% and 5.4% reduction of battery degradation and a 9.5% and 3.1% reduction of total cost are achieved by the proposed strategy.