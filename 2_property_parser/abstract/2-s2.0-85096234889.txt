This paper presents a framework for optimizing the power allocation between a battery and supercapacitor in an electric vehicle energy storage system. A convex optimal control formulation is proposed that minimizes total energy consumption whilst enforcing hard constraints on power output and total energy stored in the battery and supercapacitor. An alternating direction method of multipliers (ADMM) algorithm is proposed, for which computational and memory requirements scale linearly with the length of the prediction horizon (and can be reduced using parallel processing). The optimal controller is compared with a low-pass filter against an all-battery baseline in numerical simulations, where it is shown to provide significant improvement in battery degradation (inferred through reductions of 71.4% in peak battery power, 21.0% in root-mean-squared battery power, and 13.7% in battery throughput), and a reduction of 5.7% in energy consumption. It is also shown that the ADMM algorithm can solve the optimization problem in a fraction of a second for prediction horizons of more than 15 minutes, and is therefore a promising candidate for online receding-horizon control.