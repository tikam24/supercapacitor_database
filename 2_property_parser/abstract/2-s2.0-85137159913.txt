This study presents a nonlinear energy management system (EMS) for a hybrid energy storage system (HESS) consisting of two energy sources: a proton exchange membrane fuel cell (PEMFC) considered as the main source, and a supercapacitor (SC) considered as the auxiliary source. Each source is connected to a dc bus using two dc-dc power converters: a boost converter for the fuel cell (FC) and a buck-boost converter for the supercapacitor. The objective is to elaborate, depending on the state of charge (SOC), the trajectory of the supercapacitor current reference that minimizes the energy provided by the fuel cell, taking into account the nonlinear model of the supercapacitor. To this end, a nonlinear optimization technique based on the Euler-Lagrange principle is used. The optimization strategy aims to efficiently operate the hybrid system taking into account all technical and operating limitations of power sources and involved nonlinearities. It is shown, using theoretical results and simulations that the objective of energy management for the considered HESS is achieved.