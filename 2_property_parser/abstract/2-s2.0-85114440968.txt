This paper proposes an energy management strategy for a fuel cell (FC) hybrid power system based on dynamic programming and state machine strategy, which takes into account the durability of the FC and the hydrogen consumption of the system. The strategy first uses the principle of dynamic programming to solve the optimal power distribution between the FC and supercapacitor (SC), and then uses the optimization results of dynamic programming to update the threshold values in each state of the finite state machine to realize real-time management of the output power of the FC and SC. An FC/SC hybrid tramway simulation platform is established based on RT-LAB real-time simulator. The compared results verify that the proposed EMS can improve the durability of the FC, increase its working time in the high-efficiency range, effectively reduce the hydrogen consumption, and keep the state of charge in an ideal range.