An effective energy management system (EMS) was designed based on the Stateflow (SF) approach for a grid-connected nanogrid (NG) composed of a photovoltaic (PV) array with a battery bank and supercapacitor (SC) energy storage system (ESS). The PV energy system, battery bank and SC (ESS), dual active bridge DC/DC converters, DC/AC inverters, control algorithms, and controllers were developed to test the operation of the NG. The average and high-frequency power components are separated using frequency division of the ESS power utilizing a low-pass filter; the average power is absorbed by the battery bank, while the high-frequency power is absorbed by the SC. The aim of this paper is to design an EMS to manage the energy of a grid-connected NG system considering the availability of the PV array, ESS, and demand requirements. Different scenarios of operation were tested to check the EMS behaviour during the day with a random demand profile, including: (1) a PV array with the grid supplying the load without an EMS; (2) a PV array, batteries, and the grid supplying the load with an EMS; (3) a PV array, batteries, an SC, and the grid supplying the load with an EMS; (4) a PV array, batteries, an SC, and the grid supplying the load with an EMS, with load profile reduction by 20% due to COVID-19. As per the simulation results, the proposed EMS enables the flow of power in the NG system and demonstrates the impact on the ESS by minimising carbon emissions via a reduction in grid consumption. Furthermore, the SF method is regarded as a helpful alternative to popular design approaches employing conventional software tools.