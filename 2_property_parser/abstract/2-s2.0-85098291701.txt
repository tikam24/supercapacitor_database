Microgrid is a small-scale power supply system that can support the intelligent energy management integrated with multisource, multi-storage, and local demand side management in multiple operational modes and most importantly make the microgrid achieve self-consumption. This paper presents an algorithm for a full DC microgrid, which combines grid-connected and islanded operational modes, with real-time demand side management optimization. Such a full microgrid consists of photovoltaic sources, a DC load, battery storage systems, a supercapacitor storage, a diesel generator, and a public grid connection, which is based on a DC common bus. The proposed real-time power management focuses on building self-consumption and considers the power constraints imposed by the public grid as well as the sluggish dynamic of the diesel generator, self-discharging characteristic of the supercapacitor, and the load shedding optimization. The simulation results, obtained under MATLAB/Simulink, verify the real-time control algorithm can keep power balance in real time.