The sustainable development of human society is facing challenges of resource depletion, energy crisis and worsening environment. In this work, a typical Chinese herbal residue (gallnut residues), with a large amount of organic waste threatening the environment after extracting the bioactive components, especially in China, was used as a single precursor for both a carbon and heteroatoms source to prepare heteroatoms co-doped hierarchical porous carbon via carbonization and a subsequent KOH activation. The prepared nitrogen, oxygen and sulfur co-doped porous carbons (NOSPC-X) show developed hierarchical micro-mesoporous structures, high specific surface areas, as well as high content of N/S co-doping. When used as supercapacitor electrodes, NOSPC-800 exhibits excellent electrochemical performance with an ultrahigh specific capacitance, a high energy density of 11.25 W h kg-1 at 25 W kg-1 and an excellent charge-discharge cycling stability of 96.5% capacitance remained after 10000 cycles. As an ORR electrocatalyst, it shows outstanding ORR activity as well as much better stability and methanol-tolerance capacity than that of a commercial Pt/C catalyst. The unique hierarchical micro-mesoporous architecture, high surface area as well as optimal N and S co-doping level make biomass-derived NOSPC-800 an excellent candidate for electrode materials in diverse electrochemical energy applications.