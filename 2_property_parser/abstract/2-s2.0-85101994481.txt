In order to absorb regenerative braking energy, supercapacitors are widely used in railway. In order to improve the energy storage efficiency, the adjustment of the charge and discharge threshold is important. In this paper, intelligent algorithms and rule-based algorithms are combined. Firstly, charge and discharge threshold curves of wayside and on-board supercapacitor are optimized; then, we analyzed the optimized curves in detail and extracted the rules; finally, based on the extracted rules, a corresponding online optimization strategy for charge and discharge thresholds is proposed. After simulation comparison and verification, the energy storage efficiency of the strategy is very well.