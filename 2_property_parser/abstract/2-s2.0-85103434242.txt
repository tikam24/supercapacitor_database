Because of the influence of the external environment, such as solar radiation and temperature, photovoltaic grid-connected power generation system canâ€™t export power continuously and stably. Combined with advantages of battery and super capacitor, a hybrid energy storage system is constituted, which could smooth the grid-connected power relatively. In this paper, the structure of a hybrid energy storage system composed by super capacitor and battery is studied, control strategy and PID setting of hybrid energy storage system are proposed. Simulation model is put forward based on MATLAB, simulation results show that the hybrid energy storage system can level off photovoltaic power, the maximum power fluctuation is less than 5%. Therefore, it shows that the structure of hybrid energy storage system and the control strategy are reasonable and feasible.