Due to the interconnected network and high porosity, melamine foam has been selected as the template to obtain hierarchical porous carbon. In this paper, porous carbon with hierarchical porous structure, high pore volume and high specific surface area is prepared by using melamine foam as template and waste liquid (from the production of vitamin C) as carbon precursor coupled with KOH-activation. Owing to these favorable structural characteristics, the supercapacitors electrodes based on the as-prepared products have outstanding electrochemical performances in 1-ethyl-3-methylimidazolium tetrafluoroborate (EMIMBF4) electrolyte. The optimized electrode (WMFPC700-5) reaches a high specific capacitance (217 F g−1 at 0.1 A g−1) and superior cycling stability (specific capacitance retention of 89% after 10000 cycles at 5 A g−1). Notably, supercapacitors displays an ultra-high energy density of 107 Wh kg−1 at a power density of 94 W kg−1 in EMIMBF4 electrolyte system. In addition, the all-solid-state symmetric supercapacitors based on WMFPC700-5 demonstrates a remarkable specific capacitance of 180 F g−1 at 0.5 A g−1 in the EMIMBF4/PVDF-HFP gel polymer electrolyte.