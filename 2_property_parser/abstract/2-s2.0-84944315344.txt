While energy harvesting technology is a promising solution toward achieving self-sustainable low power systems, the efficient energy storage for these energy harvesting systems is still a challenge because of high self-leakage (e.g., supercapacitors) and limited life cycles (e.g., batteries). In this work, we propose an adaptive quality-aware energy management middleware framework for energy harvesting embedded systems. Our hybrid energy storage model takes into consideration the battery life cycle, supercapacitor self-leakage, and power loss in the harvesting circuit. The framework has an offline planning phase and a runtime adaptation phase. By incorporating abstract models for battery state of health (SoH) and supercapacitor self-leakage, the offline stage determines the budget for charging and discharging distribution of each storage component and accordingly adapts the application quality of service (QoS). The runtime adaptation phase dynamically adjusts the charging and discharging distribution to the dynamic changes in energy harvesting profile. In comparison with related work, our proposed framework is able to capture the lifetime and characteristics of the energy storage components more accurately during adaptation and hence, resulting in a more sustainable system with realistic QoS.